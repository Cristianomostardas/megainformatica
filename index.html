<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Or√ßamento de Material Escolar</title>
    
    <!-- React e ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Estilos globais -->
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f9fafb; }
        .animate-fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- CONFIGURA√á√ÉO DA LOJA ---
        const STORE_PHONE = "5551996040261"; 
        const STORE_NAME = "Mega Inform√°tica & Papelaria";
        const STORE_ADDRESS = "Rua Luiz Ara√∫jo, 819 - Centro - Mostardas";

        // --- BANCO DE DADOS (Simulado) ---
        const schools = [
            { id: 1, name: "E. M. Ruy Miguel" },
            { id: 2, name: "Creche Iolanda Tesche" },
            { id: 3, name: "Creche H√©lio Rodrigues" },
            { id: 4, name: "E. E. E. F. 11 de Abril" }
        ];

        const grades = [
            "Maternal", "Jardim I", "Jardim II", "1¬∫ Ano", "2¬∫ Ano", "3¬∫ Ano", "4¬∫ Ano", "5¬∫ Ano", "6¬∫ ao 9¬∫ Ano", "Ensino M√©dio"
        ];

        // --- COMPONENTE DE √çCONES ---
        const Icon = ({ name, className }) => {
            const icons = {
                "book-open": <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />,
                "map-pin": <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z M12 7a3 3 0 1 0 0 6 3 3 0 0 0 0-6z" />,
                "school": <path d="M14 22v-4a2 2 0 1 0-4 0v4 M18 22V11.7V5a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v17h12z M4 22h16" />,
                "graduation-cap": <path d="M22 10v6M2 10l10-5 10 5-10 5z M6 12v5c3 3 9 3 12 0v-5" />,
                "user": <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2 M12 3a4 4 0 1 0 0 8 4 4 0 0 0 0-8z" />,
                "phone": <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" />,
                "chevron-right": <polyline points="9 18 15 12 9 6" />,
                "check-square": <polyline points="9 11 12 14 22 4" />,
                "square": <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />,
                "send": <g><line x1="22" y1="2" x2="11" y2="13" /><polygon points="22 2 15 22 11 13 2 9 22 2" /></g>,
                "check": <polyline points="20 6 9 17 4 12" />
            };

            return (
                <svg 
                    xmlns="http://www.w3.org/2000/svg" 
                    width="24" height="24" viewBox="0 0 24 24" 
                    fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" 
                    className={className}
                >
                    {icons[name] || <circle cx="12" cy="12" r="10" />}
                </svg>
            );
        };

        // --- L√ìGICA DO APP ---
        const getListItems = (schoolId, grade) => {
            // ITENS B√ÅSICOS (Aparecem para todos)
            const basics = [
                { id: 1, name: "Agenda Escolar 2026", category: "Papelaria" },
                { id: 2, name: "Estojo Duplo", category: "Organiza√ß√£o" },
                { id: 3, name: "Mochila Escolar Resistente", category: "Transporte" },
                { id: 4, name: "Garrafinha de √Ågua", category: "Acess√≥rios" },
            ];

            // LISTA INFANTIL (Maternal at√© 2¬∫ Ano)
            const kids = [
                { id: 10, name: "Caixa de L√°pis de Cor (24 cores)", category: "Arte" },
                { id: 11, name: "Massa de Modelar (12 cores)", category: "Arte" },
                { id: 12, name: "Cola Branca 90g", category: "Colas" },
                { id: 13, name: "Caderno de Desenho (Grande)", category: "Papelaria" },
                { id: 14, name: "Tesoura sem ponta", category: "Acess√≥rios" },
                { id: 15, name: "Giz de Cera (12 cores)", category: "Arte" },
                { id: 16, name: "Tinta Guache (6 cores)", category: "Arte" },
                { id: 17, name: "Pincel Chato n¬∫ 8", category: "Arte" },
            ];

            // LISTA JUVENIL (3¬∫ Ano em diante)
            const teens = [
                { id: 20, name: "Caderno Universit√°rio (10 mat√©rias)", category: "Papelaria" },
                { id: 21, name: "Kit Canetas Esferogr√°ficas (Azul/Preta/Vermelha)", category: "Escrita" },
                { id: 22, name: "Corretivo em Fita", category: "Escrita" },
                { id: 23, name: "Marca Texto (Kit 4 cores)", category: "Escrita" },
                { id: 24, name: "R√©gua 30cm", category: "Geometria" },
                { id: 25, name: "Lapiseira 0.7mm", category: "Escrita" },
                { id: 26, name: "Grafite 0.7mm", category: "Escrita" },
                { id: 27, name: "Calculadora Cient√≠fica", category: "Eletr√¥nicos" },
                { id: 28, name: "Bloco de Notas Adesivas", category: "Papelaria" },
            ];

            if (["Maternal", "Jardim I", "Jardim II", "1¬∫ Ano", "2¬∫ Ano"].includes(grade)) {
                return [...basics, ...kids];
            } else {
                return [...basics, ...teens];
            }
        };

        function App() {
            const [step, setStep] = useState(1);
            const [formData, setFormData] = useState({
                schoolId: "",
                grade: "",
                studentName: "",
                parentName: "",
                parentPhone: ""
            });
            const [items, setItems] = useState([]);
            const [selectedItems, setSelectedItems] = useState(new Set());

            const handleChange = (e) => {
                const { name, value } = e.target;
                setFormData(prev => ({ ...prev, [name]: value }));
            };

            const handleNext = () => {
                if (!formData.schoolId || !formData.grade || !formData.parentName || !formData.parentPhone) {
                    alert("Por favor, preencha a escola, s√©rie e seus dados de contato.");
                    return;
                }
                const list = getListItems(formData.schoolId, formData.grade);
                setItems(list);
                setSelectedItems(new Set(list.map(i => i.id)));
                setStep(2);
                window.scrollTo(0, 0);
            };

            const toggleItem = (id) => {
                const newSelected = new Set(selectedItems);
                if (newSelected.has(id)) newSelected.delete(id);
                else newSelected.add(id);
                setSelectedItems(newSelected);
            };

            const handleSendWhatsapp = () => {
                const schoolName = schools.find(s => s.id == formData.schoolId)?.name;
                const finalItems = items.filter(i => selectedItems.has(i.id));

                if (finalItems.length === 0) {
                    alert("Selecione pelo menos um item para or√ßar.");
                    return;
                }

                let message = `Ol√° *${STORE_NAME}*! üëã\n`;
                message += `Gostaria de um or√ßamento para a seguinte lista:\n\n`;
                message += `üè´ *Escola:* ${schoolName}\n`;
                message += `üìö *S√©rie:* ${formData.grade}\n`;
                if (formData.studentName) message += `üéì *Aluno(a):* ${formData.studentName}\n`;
                message += `üë§ *Respons√°vel:* ${formData.parentName}\n`;
                message += `üì± *Contato:* ${formData.parentPhone}\n\n`;
                message += `*ITENS DESEJADOS (${finalItems.length}):*\n`;
                finalItems.forEach(item => {
                    message += `‚úÖ ${item.name}\n`;
                });
                message += `\nAguardo o valor total e disponibilidade. Obrigado!`;

                const url = `https://wa.me/${STORE_PHONE}?text=${encodeURIComponent(message)}`;
                window.open(url, '_blank');
            };

            return (
                <div className="min-h-screen bg-gray-50 font-sans text-gray-800">
                    <header className="bg-indigo-600 text-white p-6 shadow-lg">
                        <div className="max-w-md mx-auto">
                            <h1 className="text-xl font-bold flex items-center gap-2 mb-1">
                                <Icon name="book-open" className="w-6 h-6" />
                                {STORE_NAME}
                            </h1>
                            <div className="flex items-center gap-2 text-indigo-100 text-xs">
                                <Icon name="map-pin" className="w-3 h-3" />
                                <p>{STORE_ADDRESS}</p>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-md mx-auto p-4">
                        {step === 1 && (
                            <div className="space-y-6 animate-fade-in">
                                <div className="bg-white p-5 rounded-2xl shadow-sm border border-gray-200">
                                    <h2 className="text-lg font-bold text-gray-700 mb-4 flex items-center gap-2">
                                        <Icon name="school" className="w-5 h-5 text-indigo-500" /> Dados da Escola
                                    </h2>
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-600 mb-1">Selecione a Escola *</label>
                                            <select name="schoolId" value={formData.schoolId} onChange={handleChange} className="w-full p-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none">
                                                <option value="">Toque para escolher...</option>
                                                {schools.map(school => (
                                                    <option key={school.id} value={school.id}>{school.name}</option>
                                                ))}
                                            </select>
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-600 mb-1">Selecione a S√©rie *</label>
                                            <select name="grade" value={formData.grade} onChange={handleChange} className="w-full p-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none">
                                                <option value="">Toque para escolher...</option>
                                                {grades.map(grade => (
                                                    <option key={grade} value={grade}>{grade}</option>
                                                ))}
                                            </select>
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-600 mb-1">Nome do Aluno (Opcional)</label>
                                            <div className="relative">
                                                <div className="absolute left-3 top-3.5 text-gray-400"><Icon name="graduation-cap" className="w-5 h-5" /></div>
                                                <input type="text" name="studentName" value={formData.studentName} onChange={handleChange} placeholder="Ex: Jo√£o Silva" className="w-full pl-10 p-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none" />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-white p-5 rounded-2xl shadow-sm border border-gray-200">
                                    <h2 className="text-lg font-bold text-gray-700 mb-4 flex items-center gap-2">
                                        <Icon name="user" className="w-5 h-5 text-indigo-500" /> Seus Dados
                                    </h2>
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-600 mb-1">Seu Nome *</label>
                                            <input type="text" name="parentName" value={formData.parentName} onChange={handleChange} placeholder="Nome do pai/m√£e" className="w-full p-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none" />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-600 mb-1">Seu Telefone/WhatsApp *</label>
                                            <div className="relative">
                                                <div className="absolute left-3 top-3.5 text-gray-400"><Icon name="phone" className="w-5 h-5" /></div>
                                                <input type="tel" name="parentPhone" value={formData.parentPhone} onChange={handleChange} placeholder="(00) 00000-0000" className="w-full pl-10 p-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none" />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <button onClick={handleNext} className="w-full bg-indigo-600 text-white font-bold py-4 rounded-xl shadow-lg hover:bg-indigo-700 transition-all flex items-center justify-center gap-2">
                                    Ver Lista de Materiais <Icon name="chevron-right" className="w-5 h-5" />
                                </button>
                            </div>
                        )}

                        {step === 2 && (
                            <div className="flex flex-col h-full animate-fade-in">
                                <div className="bg-indigo-50 p-4 rounded-xl border border-indigo-100 mb-4 flex items-center justify-between">
                                    <div>
                                        <h3 className="font-bold text-indigo-900">{schools.find(s=>s.id == formData.schoolId)?.name}</h3>
                                        <p className="text-sm text-indigo-600">{formData.grade} ‚Ä¢ {formData.studentName || "Aluno(a)"}</p>
                                    </div>
                                    <button onClick={() => setStep(1)} className="text-xs bg-white px-3 py-1 rounded border border-indigo-200 text-indigo-600 font-medium">Alterar</button>
                                </div>

                                <div className="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-24">
                                    <div className="p-4 bg-gray-50 border-b border-gray-200">
                                        <h2 className="font-bold text-gray-700">Selecione os itens desejados:</h2>
                                        <p className="text-xs text-gray-500">Voc√™ pode desmarcar o que j√° tem em casa.</p>
                                    </div>
                                    <div className="divide-y divide-gray-100">
                                        {items.map((item) => {
                                            const isSelected = selectedItems.has(item.id);
                                            return (
                                                <div key={item.id} onClick={() => toggleItem(item.id)} className={`p-4 flex items-center gap-4 cursor-pointer transition-colors ${isSelected ? 'bg-indigo-50/50' : 'bg-white hover:bg-gray-50'}`}>
                                                    <div className={`transition-all duration-200 ${isSelected ? 'text-indigo-600' : 'text-gray-300'}`}>
                                                        {isSelected ? <Icon name="check-square" className="w-6 h-6" /> : <Icon name="square" className="w-6 h-6" />}
                                                    </div>
                                                    <div className="flex-1">
                                                        <p className={`font-medium ${isSelected ? 'text-gray-900' : 'text-gray-500'}`}>{item.name}</p>
                                                        <p className="text-xs text-gray-400">{item.category}</p>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>

                                <div className="fixed bottom-0 left-0 right-0 bg-white p-4 border-t border-gray-200 shadow-[0_-5px_20px_rgba(0,0,0,0.1)] z-20">
                                    <div className="max-w-md mx-auto flex flex-col gap-2">
                                        <div className="flex justify-between items-center px-1">
                                            <span className="text-sm text-gray-500">Itens selecionados:</span>
                                            <span className="font-bold text-indigo-600 text-lg">{selectedItems.size} de {items.length}</span>
                                        </div>
                                        <button onClick={handleSendWhatsapp} className="w-full bg-green-600 text-white font-bold py-3.5 rounded-xl shadow-md hover:bg-green-700 transition-all flex items-center justify-center gap-2">
                                            <Icon name="send" className="w-5 h-5" /> Enviar Or√ßamento no WhatsApp
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>