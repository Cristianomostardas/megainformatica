<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OrÃ§amento de Material Escolar</title>
    
    <!-- React e ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Estilos globais -->
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f9fafb; }
        .animate-fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // =================================================================================
        // ÃREA DE CONFIGURAÃ‡ÃƒO (EDITE AQUI)
        // =================================================================================

        // --- 1. DADOS DA LOJA ---
        const STORE_PHONE = "555199759606"; 
        const STORE_NAME = "Mega InformÃ¡tica & Papelaria";
        const STORE_ADDRESS = "Rua Luiz AraÃºjo, 819 - Centro - Mostardas";

        // --- 2. CADASTRO DAS ESCOLAS E SÃ‰RIES ---
        const schools = [
            { id: 1, name: "EMEI HÃ©lio Rodrigues da Silva" },
            { id: 2, name: "EMEI Dona Iolanda Tesche" },
            { id: 3, name: "EMEI Ruy Miguel Victorino" },
            { id: 4, name: "EMEI Marcelo Gama"},
            { id: 5, name: "E.E.E.F. 11 de Abril" }
        ];

        // Lista MESTRA de sÃ©ries para manter a ordem correta de exibiÃ§Ã£o
        const allGradesOrder = [
            "BerÃ§Ã¡rio II", "Maternal", "Maternal I", "Maternal II", 
            "Jardim I", "Jardim II", 
            "1Âº Ano", "2Âº Ano", "3Âº Ano", "4Âº Ano", "5Âº Ano", 
            "6Âº Ano", "7Âº Ano", "8Âº Ano", "9Âº Ano", 
            "Ensino MÃ©dio"
        ];

        // --- 3. CADASTRO DAS LISTAS DE MATERIAIS (INDIVIDUAL POR ESCOLA E SÃ‰RIE) ---
        // Estrutura: { ID_DA_ESCOLA: { "NOME DA SÃ‰RIE": [ ...materiais... ] } }
        
        const LISTS_DB = {
            // --- LISTAS DA ESCOLA 1 (EMEI HÃ©lio Rodrigues) ---
            1: {
                "BerÃ§Ã¡rio II": [
                    { name: "1 Tinta guache grande", category: "Papelaria" },
                    { name: "1 Pincel nÂº 20 ou 24", category: "Transporte" },
                    { name: "1 Folha de cartolina", category: "Higiene" },
                    { name: "1 folha de EVA", category: "AlimentaÃ§Ã£o" },
                    { name: "1 folha de EVA com glitter", category: "Arte" },
                    { name: "1 Papel crepom", category: "Arte" },
                    { name: "1 Papel colorset", category: "Arte" },
                    { name: "1 Rolinho de pintura pequeno", category: "Arte" },
                    { name: "1 Caixa ou pacote de AlgodÃ£o", category: "Arte" },
                    { name: "1 Massinha de modelar", category: "Arte" },
                    { name: "1 Cola branca", category: "Arte" },
                    { name: "1 Caixa de giz de cera (meu 1Âº giz)", category: "Arte" },
                    { name: "1 Pacote de folha de sulfite branca A4", category: "Arte" },
                    { name: "1 Pacote de palito de picolÃ©", category: "Arte" },
                    { name: "1 Pacote de balÃµes coloridos", category: "Arte" },
                    { name: "1 Brinquedo na faixa etÃ¡ria", category: "Arte" },
                    { name: "1 Livro infantil de material resistente (pano/plÃ¡stico)", category: "Arte" }
                ],
                "Maternal I": [
                    { name: "1 Tinta tÃªmpera", category: "Papelaria" },
                    { name: "1 Massinha de modelar", category: "Arte" },
                    { name: "1 Pincel nÂº 16", category: "Colas" },
                    { name: "1 Papel crepom", category: "AcessÃ³rios" },
                    { name: "1 Folha EVA", category: "OrganizaÃ§Ã£o" },
                    { name: "100 folhas de ofÃ­cio", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Brinquedo faixa etÃ¡ria 2-3 anos (Ex: Bonecas, carrinhos, panelinhas, ursos, bolas)", category: "OrganizaÃ§Ã£o" }
                ],
                "Maternal II": [
                    { name: "1 Folha de EVA", category: "Papelaria" },
                    { name: "1 Folha de colorset", category: "Arte" },
                    { name: "1 Folha de cartolina", category: "Colas" },
                    { name: "1 Agenda escolar", category: "AcessÃ³rios" },
                    { name: "1 Garrafa para Ã¡gua", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Tubo de cola", category: "OrganizaÃ§Ã£o" },
                    { name: "1 TÃªmpera Grande", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Pincel", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Tesoura escolar", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Cx de LÃ¡pis de Cor", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Cx Giz de Cera", category: "OrganizaÃ§Ã£o" },
                    { name: "2 Cx de Massa de Modelar", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Cx de algodÃ£o", category: "OrganizaÃ§Ã£o" },
                    { name: "1 livro infantil", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Jogo pedagÃ³gico (3-4 anos)", category: "OrganizaÃ§Ã£o" },
                    { name: "Folhas de ofÃ­cio", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Pacote de Palito de PicolÃ©", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Brinquedo", category: "OrganizaÃ§Ã£o" }
                ],
                "Jardim I": [
                    { name: "1 Cola branca mÃ©dia", category: "Papelaria" },
                    { name: "1 Tesoura sem ponta", category: "Arte" },
                    { name: "1 LÃ¡pis de escrever", category: "Colas" },
                    { name: "1 Cx de giz de cera", category: "AcessÃ³rios" },
                    { name: "1 Borracha branca", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Apontador", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Caneta Marca Texto", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Pincel para quadro branco", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Cx de cola glitter", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Cx de LÃ¡pis de Cor longo", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Cx de cola colorida", category: "OrganizaÃ§Ã£o" },
                    { name: "3 Cx Massa de modelar", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Pct Folha A4 branca", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Pct Folha A4 180g", category: "OrganizaÃ§Ã£o" },
                    { name: "10 fls Papel A4 180g coloridas", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Folha EVA estampado, lisa ou crespa", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Folha EVA com glitter", category: "OrganizaÃ§Ã£o" },
                    { name: "2 Folhas de Papel Colorset", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Folha de Papel Cartaz", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Papel Crepom", category: "OrganizaÃ§Ã£o" },
                    { name: "1 m de Papel Contact", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Pote de Tinta grande", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Pincel nÂº 16", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Pacote de Palitos de picolÃ©", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Pacote de Palitos de churrasco", category: "OrganizaÃ§Ã£o" },
                    { name: "1 brinquedo faixa etÃ¡ria 4/6 anos (sugestÃ£o: carrinho, boneca)", category: "OrganizaÃ§Ã£o" },
                    { name: "1 jogo pedagÃ³gico faixa etÃ¡ria 4/6 anos (sugestÃ£o: quebra-cabeÃ§a, outros)", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Cx de Cotonetes", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Cx de AlgodÃ£o", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Lastex", category: "OrganizaÃ§Ã£o" }
                ],
                "Jardim II": [
                    { name: "1 Cola branca mÃ©dia", category: "Papelaria" },
                    { name: "1 Tesoura sem ponta", category: "Arte" },
                    { name: "1 LÃ¡pis de escrever", category: "Colas" },
                    { name: "1 Cx de giz de cera", category: "AcessÃ³rios" },
                    { name: "1 Borracha branca", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Apontador", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Caneta Marca Texto", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Pincel para quadro branco", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Cx de cola glitter", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Cx de LÃ¡pis de Cor longo", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Cx de cola colorida", category: "OrganizaÃ§Ã£o" },
                    { name: "3 Cx Massa de modelar", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Pct Folha A4 branca", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Pct Folha A4 180g", category: "OrganizaÃ§Ã£o" },
                    { name: "10 fls Papel A4 180g coloridas", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Folha EVA estampado, lisa ou crespa", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Folha EVA com glitter", category: "OrganizaÃ§Ã£o" },
                    { name: "2 Folhas de Papel Colorset", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Folha de Papel Cartaz", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Papel Crepom", category: "OrganizaÃ§Ã£o" },
                    { name: "1 m de Papel Contact", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Pote de Tinta grande", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Pincel nÂº 16", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Pacote de Palitos de picolÃ©", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Pacote de Palitos de churrasco", category: "OrganizaÃ§Ã£o" },
                    { name: "1 brinquedo faixa etÃ¡ria 4/6 anos (sugestÃ£o: carrinho, boneca)", category: "OrganizaÃ§Ã£o" },
                    { name: "1 jogo pedagÃ³gico faixa etÃ¡ria 4/6 anos (sugestÃ£o: quebra-cabeÃ§a, outros)", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Cx de Cotonetes", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Cx de AlgodÃ£o", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Lastex", category: "OrganizaÃ§Ã£o" }
                ]
            },

            // --- LISTAS DA ESCOLA 2 (EMEI Dona Iolanda Tesche) ---
            2: {
                "Jardim I": [
                    { name: "1 cx. de lÃ¡pis de cor longo, de boa qualidade (identificados)", category: "Papelaria" },
                    { name: "1 kit pequeno de canetas hidrocor ponta grossa, de boa qualidade (identificadas)", category: "AcessÃ³rios" },
                    { name: "2 lÃ¡pis de escrever (com nome)", category: "Higiene" },
                    { name: "1 apontador com depÃ³sito (com nome)", category: "Arte" },
                    { name: "1 borracha (com nome)", category: "Higiene" },
                    { name: "1 tesoura sem ponta, de boa qualidade (com nome)", category: "Higiene" },
                    { name: "1 tubo de cola branca grande (com nome) - SugestÃ£o: Tenaz, Bic ou Mercury", category: "Higiene" },
                    { name: "1 estojo para guardar o material", category: "Higiene" },
                    { name: "1 cx. de massa de modelar 12 cores (soft)", category: "Higiene" },
                    { name: "1 pote de margarina ou doce vazio e limpo (para guardar a massa)", category: "Higiene" },
                    { name: "1 escova de dente (com estojo)", category: "Higiene" },
                    { name: "1 creme dental infantil", category: "Higiene" },
                    { name: "1 pacote de lenÃ§o umedecido", category: "Higiene" },
                    { name: "2 caixas de fÃ³sforos", category: "Higiene" },
                    { name: "1 jogo pedagÃ³gico preferencialmente peÃ§as de madeira", category: "Higiene" },
                    { name: "1 pacote de palito de picolÃ© (cor de sua escolha)", category: "Higiene" },
                    { name: "1 rolinho pequeno para pintura", category: "Higiene" },
                    { name: "1 tinta guache grande (250ml) na cor: (ver lista de cores abaixo)", category: "Higiene" },
                    { name: "Cores: Cinza, preto, laranja, amarelo ouro, amarelo pele, amarelo ocre, marrom, verde folha, verde bandeira, vermelho fogo, rosa, magenta, violeta ou lilÃ¡s, branco, azul, azul turquesa.", category: "ObservaÃ§Ã£o" }
                ],
                "Jardim II": [
                    { name: "1 cx. de lÃ¡pis de cor longo, de boa qualidade (identificados)", category: "Papelaria" },
                    { name: "1 kit pequeno de canetas hidrocor ponta grossa, de boa qualidade (identificadas)", category: "AcessÃ³rios" },
                    { name: "2 lÃ¡pis de escrever (com nome)", category: "Higiene" },
                    { name: "1 apontador com depÃ³sito (com nome)", category: "Arte" },
                    { name: "1 borracha (com nome)", category: "Higiene" },
                    { name: "1 tesoura sem ponta, de boa qualidade (com nome)", category: "Higiene" },
                    { name: "1 tubo de cola branca grande (com nome) - SugestÃ£o: Tenaz, Bic ou Mercury", category: "Higiene" },
                    { name: "1 estojo para guardar o material", category: "Higiene" },
                    { name: "1 cx. de massa de modelar 12 cores (soft)", category: "Higiene" },
                    { name: "1 pote de margarina ou doce vazio e limpo (para guardar a massa)", category: "Higiene" },
                    { name: "1 escova de dente (com estojo)", category: "Higiene" },
                    { name: "1 creme dental infantil", category: "Higiene" },
                    { name: "1 pacote de lenÃ§o umedecido", category: "Higiene" },
                    { name: "2 caixas de fÃ³sforos", category: "Higiene" },
                    { name: "1 Pasta de folhinhas", category: "Papelaria" },
                    { name: "1 jogo pedagÃ³gico preferencialmente peÃ§as de madeira", category: "Higiene" },
                    { name: "1 pacote de palito de picolÃ© (cor de sua escolha)", category: "Higiene" },
                    { name: "1 rolinho pequeno para pintura", category: "Higiene" },
                    { name: "1 tinta guache grande (250ml) na cor: (ver lista de cores abaixo)", category: "Higiene" },
                    { name: "Cores: Cinza, preto, laranja, amarelo ouro, amarelo pele, amarelo ocre, marrom, verde folha, verde bandeira, vermelho fogo, rosa, magenta, violeta ou lilÃ¡s, branco, azul, azul turquesa.", category: "ObservaÃ§Ã£o" }
                ]
            },

            // --- LISTAS DA ESCOLA 3 (EMEI Ruy Miguel Victorino) ---
            3: {
                "1Âº Ano": [
                    { name: "1 cx. massa de modelar macia 12 cores (soft)", category: "Aviso" },
                    { name: "1 pote de margarina ou doce (vazio e limpo p/guardar massa de modelar)", category: "Aviso" },
                    { name: "1 cx. lÃ¡pis de cor longo, de boa qualidade", category: "Aviso" },
                    { name: "1 lÃ¡pis de escrever (com nome)", category: "Aviso" },
                    { name: "1 Caderno Brochura", category: "Aviso" },
                    { name: "1 Apontador (com nome)", category: "Aviso" },
                    { name: "1 Borracha", category: "Aviso" },
                    { name: "1 Tesoura sem ponta, de boa qualidade", category: "Aviso"},
                    { name: "1 Tubo de cola (SugestÃ£o: Tenaz, Mercury ou Bic)", category: "Aviso" },
                    { name: "1 RÃ©gua 30cm", category: "Aviso" },
                    { name: "1 Estojo para guardar o material", category: "Aviso" },
                    { name: "1 Garrafinha p/Ã¡gua (vai e vem diariamente)", category: "Aviso" },
                    { name: "1 Pasta plÃ¡stica tamanho A4 (p/guardar as atividades)", category: "Aviso" },
                    { name: "1 Pacote de folhas de ofÃ­cio", category: "Aviso" },
                    { name: "1 Pincel nÂº 12", category: "Aviso"},
                    { name: "1 Caderno de desenho (simples)", category: "Aviso"},
                    { name: "1 Canetinha hidrocor", category: "Aviso" },
                    { name: "1 Folha E.V.A liso", category: "Aviso" },
                    { name: "1 Folha papel colorset", category: "Aviso" },
                    { name: "2 Folhas plastificadora A4", category: "Aviso" },
                    { name: "1 Rolo de fita dupla face fina", category: "Aviso"},
                    { name: "1 jogo de quebra-cabeÃ§a", category: "Aviso" },
                    { name: "1 caneta para quadro branco", category: "Aviso" }
                ],
                "2Âº Ano": [
                    { name: "1 cx. massa de modelar macia 12 cores (soft)", category: "Aviso" },
                    { name: "1 pote de margarina ou doce (vazio e limpo p/guardar massa de modelar)", category: "Aviso" },
                    { name: "1 cx. lÃ¡pis de cor longo, de boa qualidade", category: "Aviso" },
                    { name: "2 lÃ¡pis de escrever (com nome)", category: "Aviso" },
                    { name: "1 Caderno grande 96 folhas c/espiral", category: "Aviso" },
                    { name: "1 Apontador (com nome)", category: "Aviso" },
                    { name: "1 Borracha", category: "Aviso" },
                    { name: "1 Tesoura sem ponta, de boa qualidade", category: "Aviso"},
                    { name: "1 Tubo de cola (SugestÃ£o: Tenaz, Mercury ou Bic)", category: "Aviso" },
                    { name: "1 RÃ©gua 30cm", category: "Aviso" },
                    { name: "1 Estojo para guardar o material", category: "Aviso" },
                    { name: "1 Garrafinha p/Ã¡gua (vai e vem diariamente)", category: "Aviso" },
                    { name: "1 Pasta plÃ¡stica tamanho A4 (p/guardar as atividades)", category: "Aviso" },
                    { name: "1 Pacote de folhas de ofÃ­cio", category: "Aviso" },
                    { name: "1 Pacote de folhas de ofÃ­cio coloridas", category: "Aviso"},
                    { name: "1 Pincel nÂº 12", category: "Aviso"},
                    { name: "1 Caderno de desenho (simples)", category: "Aviso"},
                    { name: "1 Canetinha hidrocor", category: "Aviso" },
                    { name: "1 Folha E.V.A liso", category: "Aviso" },
                    { name: "1 Folha de E.V.A.  com glitter", category: "Aviso"},
                    { name: "1 Folha papel colorset", category: "Aviso" },
                    { name: "1 jogo de tabuleiro", category: "Aviso" },
                    { name: "1 caneta para quadro branco", category: "Aviso" }
                    
                ],
                "3Âº Ano": [
                    { name: "1 cx. massa de modelar macia 12 cores (soft)", category: "Aviso" },
                    { name: "1 pote de margarina ou doce (vazio e limpo p/guardar massa de modelar)", category: "Aviso" },
                    { name: "1 cx. lÃ¡pis de cor longo, de boa qualidade", category: "Aviso" },
                    { name: "2 lÃ¡pis de escrever (com nome)", category: "Aviso" },
                    { name: "4 Cadernos grandes 96 folhas c/espiral", category: "Aviso" },
                    { name: "1 Apontador (com nome)", category: "Aviso" },
                    { name: "1 Borracha", category: "Aviso" },
                    { name: "1 Tesoura sem ponta, de boa qualidade", category: "Aviso"},
                    { name: "1 Tubo de cola (SugestÃ£o: Tenaz, Mercury ou Bic)", category: "Aviso" },
                    { name: "1 RÃ©gua 30cm", category: "Aviso" },
                    { name: "1 Estojo para guardar o material", category: "Aviso" },
                    { name: "1 Garrafinha p/Ã¡gua (vai e vem diariamente)", category: "Aviso" },
                    { name: "1 Pasta plÃ¡stica tamanho A4 (p/guardar as atividades)", category: "Aviso" },
                    { name: "1 Pacote de folhas de ofÃ­cio", category: "Aviso" },
                    { name: "1 Pacote de folhas de ofÃ­cio coloridas", category: "Aviso"},
                    { name: "1 Pincel nÂº 12", category: "Aviso"},
                    { name: "1 Caderno de desenho (simples)", category: "Aviso"},
                    { name: "1 Canetinha hidrocor", category: "Aviso" },
                    { name: "1 Folha E.V.A liso", category: "Aviso" },
                    { name: "1 Folha de E.V.A.  com glitter", category: "Aviso"},
                    { name: "1 Folha papel colorset", category: "Aviso" },
                    { name: "1 Metro de papel contatc transparente", category: "Aviso"},
                    { name: "1 jogo de tabuleiro", category: "Aviso" },
                    { name: "1 Pote de tinta guache 250ml (cor de preferÃªncia)", category: "Aviso" },
                    { name: "1 caneta para quadro branco", category: "Aviso" }
                ],
                "4Âº Ano": [
                    { name: "1 cx. massa de modelar macia 12 cores (soft)", category: "Aviso" },
                    { name: "1 pote de margarina ou doce (vazio e limpo p/guardar massa de modelar)", category: "Aviso" },
                    { name: "1 cx. lÃ¡pis de cor longo, de boa qualidade", category: "Aviso" },
                    { name: "2 lÃ¡pis de escrever (com nome)", category: "Aviso" },
                    { name: "1 Caderno grande 10 matÃ©rias c/espiral (ou 1 cad. p/disciplina. SÃ£o oito: PortuguÃªs, MatemÃ¡tica, CiÃªncias, Geografia, HistÃ³ria, Arte, EducaÃ§Ã£o FÃ­sica e Ensino Religioso)", category: "Aviso" },
                    { name: "1 Apontador (com nome)", category: "Aviso" },
                    { name: "1 Borracha", category: "Aviso" },
                    { name: "1 Tesoura sem ponta, de boa qualidade", category: "Aviso"},
                    { name: "1 Tubo de cola (SugestÃ£o: Tenaz, Mercury ou Bic)", category: "Aviso" },
                    { name: "1 RÃ©gua 30cm", category: "Aviso" },
                    { name: "1 Estojo para guardar o material", category: "Aviso" },
                    { name: "1 Garrafinha p/Ã¡gua (vai e vem diariamente)", category: "Aviso" },
                    { name: "1 Pasta plÃ¡stica tamanho A4 (p/guardar as atividades)", category: "Aviso" },
                    { name: "1 Pacote de folhas de ofÃ­cio", category: "Aviso" },
                    { name: "1 Pacote de folhas de ofÃ­cio coloridas", category: "Aviso"},
                    { name: "1 Pincel nÂº 12", category: "Aviso"},
                    { name: "1 Caderno de desenho (simples)", category: "Aviso"},
                    { name: "1 Canetinha hidrocor", category: "Aviso" },
                    { name: "1 Folha E.V.A liso", category: "Aviso" },
                    { name: "1 Folha de E.V.A.  com glitter", category: "Aviso"},
                    { name: "1 Folha papel colorset", category: "Aviso" },
                    { name: "1 Metro de papel contatc transparente", category: "Aviso"},
                    { name: "1 jogo de tabuleiro", category: "Aviso" },
                    { name: "1 Pote de tinta guache 250ml (cor de preferÃªncia)", category: "Aviso" },
                    { name: "1 caneta para quadro branco", category: "Aviso" }
                ],
                "5Âº Ano": [
                    { name: "1 cx. massa de modelar macia 12 cores (soft)", category: "Aviso" },
                    { name: "1 pote de margarina ou doce (vazio e limpo p/guardar massa de modelar)", category: "Aviso" },
                    { name: "1 cx. lÃ¡pis de cor longo, de boa qualidade", category: "Aviso" },
                    { name: "2 lÃ¡pis de escrever (com nome)", category: "Aviso" },
                    { name: "1 Caderno grande 10 matÃ©rias c/espiral (ou 1 cad. p/disciplina. SÃ£o oito: PortuguÃªs, MatemÃ¡tica, CiÃªncias, Geografia, HistÃ³ria, Arte, EducaÃ§Ã£o FÃ­sica e Ensino Religioso)", category: "Aviso" },
                    { name: "1 Apontador (com nome)", category: "Aviso" },
                    { name: "1 Borracha", category: "Aviso" },
                    { name: "1 Tesoura sem ponta, de boa qualidade", category: "Aviso"},
                    { name: "1 Tubo de cola (SugestÃ£o: Tenaz, Mercury ou Bic)", category: "Aviso" },
                    { name: "1 RÃ©gua 30cm", category: "Aviso" },
                    { name: "1 Estojo para guardar o material", category: "Aviso" },
                    { name: "1 Garrafinha p/Ã¡gua (vai e vem diariamente)", category: "Aviso" },
                    { name: "1 Pasta plÃ¡stica tamanho A4 (p/guardar as atividades)", category: "Aviso" },
                    { name: "1 Pacote de folhas de ofÃ­cio", category: "Aviso" },
                    { name: "1 Pacote de folhas de ofÃ­cio coloridas", category: "Aviso"},
                    { name: "1 Caderno de desenho (simples)", category: "Aviso"},
                    { name: "1 Canetinha hidrocor", category: "Aviso" },
                    { name: "1 jogo de tabuleiro", category: "Aviso" },
                    { name: "Roupas e calÃ§ados confortÃ¡vies para as aulas de Ed. FÃ­sica", category: "Aviso" }
                ],
                "6Âº Ano": [
                    { name: "1 cx. massa de modelar macia 12 cores (soft)", category: "Aviso" },
                    { name: "1 pote de margarina ou doce (vazio e limpo p/guardar massa de modelar)", category: "Aviso" },
                    { name: "1 cx. lÃ¡pis de cor longo, de boa qualidade", category: "Aviso" },
                    { name: "2 lÃ¡pis de escrever (com nome)", category: "Aviso" },
                    { name: "LÃ¡pis Grafite (HB e 2B)", category: "Aviso" },
                    { name: "1 Caderno grande 10 matÃ©rias c/espiral (ou 1 cad. p/disciplina. SÃ£o nove: PortuguÃªs, MatemÃ¡tica, CiÃªncias, Geografia, HistÃ³ria, Arte, EducaÃ§Ã£o FÃ­sica, InglÃªs e Ensino Religioso)", category: "Aviso" },
                    { name: "1 Caneta esferogrÃ¡fica azul", category: "Aviso" },
                    { name: "1 Caneta esferogrÃ¡fica preta", category: "Aviso" },
                    { name: "1 Apontador (com nome)", category: "Aviso" },
                    { name: "1 Borracha", category: "Aviso" },
                    { name: "1 Tesoura sem ponta, de boa qualidade", category: "Aviso"},
                    { name: "1 Tubo de cola (SugestÃ£o: Tenaz, Mercury ou Bic)", category: "Aviso" },
                    { name: "1 RÃ©gua 30cm", category: "Aviso" },
                    { name: "1 Compasso", category: "Aviso" },
                    { name: "1 Transferidor", category: "Aviso" },
                    { name: "1 Estojo para guardar o material", category: "Aviso" },
                    { name: "1 Garrafinha p/Ã¡gua (vai e vem diariamente)", category: "Aviso" },
                    { name: "1 Pasta plÃ¡stica tamanho A4 (p/guardar as atividades)", category: "Aviso" },
                    { name: "1 Pacote de folhas de ofÃ­cio", category: "Aviso" },
                    { name: "1 Pacote de folhas de ofÃ­cio coloridas", category: "Aviso"},
                    { name: "1 Caderno de desenho (simples)", category: "Aviso"},
                    { name: "1 Canetinha hidrocor", category: "Aviso" },
                    { name: "1 Pincel", category: "Aviso" },
                    { name: "Giz de cera", category: "Aviso" },
                    { name: "1 Tubo de tinta guache (cor de sua preferÃªncia)", category: "Aviso" },
                    { name: "1 jogo de tabuleiro", category: "Aviso" },
                    { name: "Roupas e calÃ§ados confortÃ¡vies para as aulas de Ed. FÃ­sica", category: "Aviso" }
                ],
                "7Âº Ano": [
                    { name: "1 cx. massa de modelar macia 12 cores (soft)", category: "Aviso" },
                    { name: "1 pote de margarina ou doce (vazio e limpo p/guardar massa de modelar)", category: "Aviso" },
                    { name: "1 cx. lÃ¡pis de cor longo, de boa qualidade", category: "Aviso" },
                    { name: "2 lÃ¡pis de escrever (com nome)", category: "Aviso" },
                    { name: "LÃ¡pis Grafite (HB e 2B)", category: "Aviso" },
                    { name: "1 Caderno grande 10 matÃ©rias c/espiral (ou 1 cad. p/disciplina. SÃ£o nove: PortuguÃªs, MatemÃ¡tica, CiÃªncias, Geografia, HistÃ³ria, Arte, EducaÃ§Ã£o FÃ­sica, InglÃªs e Ensino Religioso)", category: "Aviso" },
                    { name: "1 Caneta esferogrÃ¡fica azul", category: "Aviso" },
                    { name: "1 Caneta esferogrÃ¡fica preta", category: "Aviso" },
                    { name: "1 Apontador (com nome)", category: "Aviso" },
                    { name: "1 Borracha", category: "Aviso" },
                    { name: "1 Tesoura sem ponta, de boa qualidade", category: "Aviso"},
                    { name: "1 Tubo de cola (SugestÃ£o: Tenaz, Mercury ou Bic)", category: "Aviso" },
                    { name: "1 RÃ©gua 30cm", category: "Aviso" },
                    { name: "1 Compasso", category: "Aviso" },
                    { name: "1 Transferidor", category: "Aviso" },
                    { name: "1 Estojo para guardar o material", category: "Aviso" },
                    { name: "1 Garrafinha p/Ã¡gua (vai e vem diariamente)", category: "Aviso" },
                    { name: "1 Pasta plÃ¡stica tamanho A4 (p/guardar as atividades)", category: "Aviso" },
                    { name: "1 Pacote de folhas de ofÃ­cio", category: "Aviso" },
                    { name: "1 Pacote de folhas de ofÃ­cio coloridas", category: "Aviso"},
                    { name: "1 Caderno de desenho (simples)", category: "Aviso"},
                    { name: "1 Canetinha hidrocor", category: "Aviso" },
                    { name: "1 Pincel", category: "Aviso" },
                    { name: "Giz de cera", category: "Aviso" },
                    { name: "1 Tubo de tinta guache (cor de sua preferÃªncia)", category: "Aviso" },
                    { name: "1 jogo de tabuleiro", category: "Aviso" },
                    { name: "Roupas e calÃ§ados confortÃ¡vies para as aulas de Ed. FÃ­sica", category: "Aviso" }
                ],
                "8Âº Ano": [
                    { name: "1 cx. massa de modelar macia 12 cores (soft)", category: "Aviso" },
                    { name: "1 pote de margarina ou doce (vazio e limpo p/guardar massa de modelar)", category: "Aviso" },
                    { name: "1 cx. lÃ¡pis de cor longo, de boa qualidade", category: "Aviso" },
                    { name: "2 lÃ¡pis de escrever (com nome)", category: "Aviso" },
                    { name: "LÃ¡pis Grafite (HB e 2B)", category: "Aviso" },
                    { name: "1 Caderno grande 10 matÃ©rias c/espiral (ou 1 cad. p/disciplina. SÃ£o nove: PortuguÃªs, MatemÃ¡tica, CiÃªncias, Geografia, HistÃ³ria, Arte, EducaÃ§Ã£o FÃ­sica, InglÃªs e Ensino Religioso)", category: "Aviso" },
                    { name: "1 Caneta esferogrÃ¡fica azul", category: "Aviso" },
                    { name: "1 Caneta esferogrÃ¡fica preta", category: "Aviso" },
                    { name: "1 Apontador (com nome)", category: "Aviso" },
                    { name: "1 Borracha", category: "Aviso" },
                    { name: "1 Tesoura sem ponta, de boa qualidade", category: "Aviso"},
                    { name: "1 Tubo de cola (SugestÃ£o: Tenaz, Mercury ou Bic)", category: "Aviso" },
                    { name: "1 RÃ©gua 30cm", category: "Aviso" },
                    { name: "1 Compasso", category: "Aviso" },
                    { name: "1 Transferidor", category: "Aviso" },
                    { name: "1 Estojo para guardar o material", category: "Aviso" },
                    { name: "1 Garrafinha p/Ã¡gua (vai e vem diariamente)", category: "Aviso" },
                    { name: "1 Pasta plÃ¡stica tamanho A4 (p/guardar as atividades)", category: "Aviso" },
                    { name: "1 Pacote de folhas de ofÃ­cio", category: "Aviso" },
                    { name: "1 Pacote de folhas de ofÃ­cio coloridas", category: "Aviso"},
                    { name: "1 Caderno de desenho (simples)", category: "Aviso"},
                    { name: "1 Canetinha hidrocor", category: "Aviso" },
                    { name: "1 Pincel", category: "Aviso" },
                    { name: "Giz de cera", category: "Aviso" },
                    { name: "1 Tubo de tinta guache (cor de sua preferÃªncia)", category: "Aviso" },
                    { name: "1 jogo de tabuleiro", category: "Aviso" },
                    { name: "Roupas e calÃ§ados confortÃ¡vies para as aulas de Ed. FÃ­sica", category: "Aviso" }
                ],
                "9Âº Ano": [
                    { name: "1 cx. massa de modelar macia 12 cores (soft)", category: "Aviso" },
                    { name: "1 pote de margarina ou doce (vazio e limpo p/guardar massa de modelar)", category: "Aviso" },
                    { name: "1 cx. lÃ¡pis de cor longo, de boa qualidade", category: "Aviso" },
                    { name: "2 lÃ¡pis de escrever (com nome)", category: "Aviso" },
                    { name: "LÃ¡pis Grafite (HB e 2B)", category: "Aviso" },
                    { name: "1 Caderno grande 10 matÃ©rias c/espiral (ou 1 cad. p/disciplina. SÃ£o nove: PortuguÃªs, MatemÃ¡tica, CiÃªncias, Geografia, HistÃ³ria, Arte, EducaÃ§Ã£o FÃ­sica, InglÃªs e Ensino Religioso)", category: "Aviso" },
                    { name: "1 Caneta esferogrÃ¡fica azul", category: "Aviso" },
                    { name: "1 Caneta esferogrÃ¡fica preta", category: "Aviso" },
                    { name: "1 Apontador (com nome)", category: "Aviso" },
                    { name: "1 Borracha", category: "Aviso" },
                    { name: "1 Tesoura sem ponta, de boa qualidade", category: "Aviso"},
                    { name: "1 Tubo de cola (SugestÃ£o: Tenaz, Mercury ou Bic)", category: "Aviso" },
                    { name: "1 RÃ©gua 30cm", category: "Aviso" },
                    { name: "1 Compasso", category: "Aviso" },
                    { name: "1 Transferidor", category: "Aviso" },
                    { name: "1 Estojo para guardar o material", category: "Aviso" },
                    { name: "1 Garrafinha p/Ã¡gua (vai e vem diariamente)", category: "Aviso" },
                    { name: "1 Pasta plÃ¡stica tamanho A4 (p/guardar as atividades)", category: "Aviso" },
                    { name: "1 Pacote de folhas de ofÃ­cio", category: "Aviso" },
                    { name: "1 Pacote de folhas de ofÃ­cio coloridas", category: "Aviso"},
                    { name: "1 Caderno de desenho (simples)", category: "Aviso"},
                    { name: "1 Canetinha hidrocor", category: "Aviso" },
                    { name: "1 Pincel", category: "Aviso" },
                    { name: "Giz de cera", category: "Aviso" },
                    { name: "1 Tubo de tinta guache (cor de sua preferÃªncia)", category: "Aviso" },
                    { name: "1 jogo de tabuleiro", category: "Aviso" },
                    { name: "Roupas e calÃ§ados confortÃ¡vies para as aulas de Ed. FÃ­sica", category: "Aviso" }
                ]
            }, 

            // --- LISTAS DA ESCOLA 4 (EMEI Marcelo Gama) ---
            4: {
                "Jardim I": [
                    { name: "2 LÃ¡pis de escrever", category: "Papelaria" },
                    { name: "1 Borracha", category: "Papelaria" },
                    { name: "1 Tesoura", category: "Papelaria" },
                    { name: "1 Apontador", category: "Papelaria" },
                    { name: "1 Pincel", category: "Arte" },
                    { name: "1 LÃ¡pis de Cor", category: "Arte" },
                    { name: "1 Giz de Cera", category: "Arte" },
                    { name: "2 Tubos de Cola Branca", category: "Colas" },
                    { name: "100 folhas brancas A4", category: "Papelaria" },
                    { name: "1 Massinha de Modelar", category: "Arte" },
                    { name: "1 Estojo", category: "OrganizaÃ§Ã£o" },
                    { name: "Canetinhas Hidrocor", category: "Arte" },
                    { name: "1 Lixa dÃ¡gua preta", category: "Arte" },
                    { name: "1 Caderno de desenho", category: "Papelaria" },
                    { name: "1 Tinta guache 250ml (ver cor)", category: "Arte" },
                    { name: "1 Cola colorida", category: "Colas" },
                    { name: "2 tubos de Cola glitter", category: "Colas" },
                    { name: "1 fl. Cartolina (ver cor)", category: "Papelaria" },
                    { name: "1 fl. de E.V.A. (ver cor)", category: "Papelaria" },
                    { name: "1 fl. E.V.A. com glitter", category: "Papelaria" },
                    { name: "1 fl. Papel crepom", category: "Papelaria" },
                    { name: "1 jogo ou brinquedo (blocos, boneco, carrinho)", category: "OrganizaÃ§Ã£o" },
                    { name: "1 folha papel colorset", category: "Papelaria" },
                    { name: "50 fls. A4 coloridas (creative paper)", category: "Papelaria" },
                    { name: "2 potes c/tampa (um p/guardar as massinhas e um p/giz de cera)", category: "OrganizaÃ§Ã£o" }
                ],
                "Jardim II": [
                    { name: "2 LÃ¡pis de escrever", category: "Papelaria" },
                    { name: "1 Estojo", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Borracha", category: "Papelaria" },
                    { name: "1 Tesoura", category: "Papelaria" },
                    { name: "1 Apontador", category: "Papelaria" },
                    { name: "2 Tubos de Cola Branca", category: "Colas" },
                    { name: "50 fls. A4 coloridas", category: "Papelaria" },
                    { name: "100 folhas brancas A4", category: "Papelaria" },
                    { name: "1 Massinha de Modelar", category: "Arte" },
                    { name: "1 LÃ¡pis de Cor", category: "Arte" },
                    { name: "1 Caderno de desenho", category: "Papelaria" },
                    { name: "1 Pct. de palitos de picolÃ©", category: "Arte"},
                    { name: "1 Cola colorida (cores variadas)", category: "Colas" },
                    { name: "2 tubos de Cola glitter", category: "Colas" },
                    { name: "1 fl. Cartolina (ver cor)", category: "Papelaria" },
                    { name: "1 fl. de E.V.A. (ver cor)", category: "Papelaria" },
                    { name: "1 Tinta guache pote grande (ver cor)", category: "Arte" },
                    { name: "1 fl. E.V.A. com glitter", category: "Papelaria"},
                    { name: "1 folha papel colorset", category: "Papelaria" },
                    { name: "1 fl. Papel crepom", category: "Papelaria" },
                    { name: "1 Pasta grampo trilho cartÃ£o", category: "Papelaria"},
                    { name: "1 brinquedo (panelinhas, bonecos, animais, carrinhos)", category: "OrganizaÃ§Ã£o" },
                    { name: "1 pote c/tampa p/guardar as massinhas", category: "OrganizaÃ§Ã£o" }
                ],
                "1Âº Ano": [
                    { name: "Mochila (de preferÃªncia s/rodinhas)", category: "Transporte" },
                    { name: "1 Tesoura", category: "Papelaria" },
                    { name: "1 LÃ¡pis de Escrever", category: "Papelaria" },
                    { name: "1 Borracha", category: "Papelaria" },
                    { name: "1 Apontador", category: "Papelaria" },
                    { name: "1 Cola Branca", category: "Colas" },
                    { name: "10 fls. A4 180g", category: "Papelaria" },
                    { name: "100 folhas brancas A4", category: "Papelaria" },
                    { name: "1 Cx. Massinha de Modelar", category: "Arte" },
                    { name: "1 LÃ¡pis de Cor", category: "Arte" },
                    { name: "1 Giz de cera", category: "Arte"},
                    { name: "1 Caderno de desenho", category: "Papelaria" },
                    { name: "1 Caderno Grande 96 fls.", category: "Papelaria"},
                    { name: "1 Pasta p/folhas A4", category: "OrganizaÃ§Ã£o" },
                    { name: "1 Livro de literatura infantil", category: "Livros" },
                    { name: "1 Ãbaco (conforme foto a seguir)", category: "MatemÃ¡tica" }
                ],
                "4Âº Ano": [
                    { name: "1 Mochila", category: "Transporte" },
                    { name: "1 Estojo", category: "OrganizaÃ§Ã£o" },
                    { name: "1 LÃ¡pis de escrever", category: "Papelaria" },
                    { name: "1 Borracha", category: "Papelaria" },
                    { name: "1 Tesoura", category: "Papelaria" },
                    { name: "1 Apontador", category: "Papelaria" },
                    { name: "1 Tubo de Cola Branca", category: "Colas" },
                    { name: "1 RÃ©gua de 30cm", category: "Papelaria" },
                    { name: "50 fls. A4 coloridas", category: "Papelaria" },
                    { name: "1 Pincel", category: "Arte" },
                    { name: "1 Canetinhas", category: "Arte" },
                    { name: "1 LÃ¡pis de Cor", category: "Arte" },
                    { name: "1 Caderno de desenho", category: "Papelaria" },
                    { name: "10 fls. gramatura 180", category: "Papelaria" },
                    { name: "3 Cadernos grandes 96 fls. (nÃ£o Ã© indicado o uso de cad. intel.)", category: "Papelaria" },
                    { name: "1 Pasta para folhas A4", category: "OrganizaÃ§Ã£o" },
                    { name: "1 fl. Cartolina", category: "Papelaria" }
                ],
                "5Âº Ano": [
                    { name: "1 Mochila", category: "Transporte" },
                    { name: "1 Estojo", category: "OrganizaÃ§Ã£o" },
                    { name: "1 LÃ¡pis de escrever", category: "Papelaria" },
                    { name: "1 Borracha", category: "Papelaria" },
                    { name: "1 Tesoura", category: "Papelaria" },
                    { name: "1 Apontador", category: "Papelaria" },
                    { name: "1 Tubo de Cola Branca", category: "Colas" },
                    { name: "1 RÃ©gua de 30cm", category: "Papelaria" },
                    { name: "50 fls. A4 coloridas", category: "Papelaria" },
                    { name: "1 Pincel", category: "Arte" },
                    { name: "1 LÃ¡pis de Cor", category: "Arte" },
                    { name: "10 fls. gramatura 180", category: "Papelaria" },
                    { name: "Canetas: azul, preta e uma colorida", category: "Escrita" },
                    { name: "1 Caderno de desenho", category: "Papelaria" },
                    { name: "4 Cadernos grandes 96 fls.", category: "Papelaria" },
                    { name: "1 Pasta para folhas A4", category: "OrganizaÃ§Ã£o" },
                    { name: "1 fl. Cartolina", category: "Papelaria" }
                ]
            }
        };

        // =================================================================================
        // FIM DA ÃREA DE CONFIGURAÃ‡ÃƒO (NÃƒO PRECISA MEXER ABAIXO)
        // =================================================================================

        // --- COMPONENTE DE ÃCONES ---
        const Icon = ({ name, className }) => {
            const icons = {
                "book-open": <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />,
                "map-pin": <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z M12 7a3 3 0 1 0 0 6 3 3 0 0 0 0-6z" />,
                "school": <path d="M14 22v-4a2 2 0 1 0-4 0v4 M18 22V11.7V5a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v17h12z M4 22h16" />,
                "graduation-cap": <path d="M22 10v6M2 10l10-5 10 5-10 5z M6 12v5c3 3 9 3 12 0v-5" />,
                "user": <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2 M12 3a4 4 0 1 0 0 8 4 4 0 0 0 0-8z" />,
                "phone": <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" />,
                "chevron-right": <polyline points="9 18 15 12 9 6" />,
                "check-square": <polyline points="9 11 12 14 22 4" />,
                "square": <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />,
                "send": <g><line x1="22" y1="2" x2="11" y2="13" /><polygon points="22 2 15 22 11 13 2 9 22 2" /></g>,
                "check": <polyline points="20 6 9 17 4 12" />
            };

            return (
                <svg 
                    xmlns="http://www.w3.org/2000/svg" 
                    width="24" height="24" viewBox="0 0 24 24" 
                    fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" 
                    className={className}
                >
                    {icons[name] || <circle cx="12" cy="12" r="10" />}
                </svg>
            );
        };

        function App() {
            const [step, setStep] = useState(1);
            const [formData, setFormData] = useState({
                schoolId: "",
                grade: "",
                studentName: "",
                parentName: "",
                parentPhone: ""
            });
            const [items, setItems] = useState([]);
            const [selectedItems, setSelectedItems] = useState(new Set());

            // --- LÃ“GICA DE FILTRAGEM DE SÃ‰RIES ---
            // Calcula quais sÃ©ries estÃ£o disponÃ­veis baseado na escola selecionada
            const availableGrades = useMemo(() => {
                if (!formData.schoolId) return [];
                
                // Pega as sÃ©ries que tÃªm lista cadastrada para a escola selecionada
                const schoolLists = LISTS_DB[formData.schoolId] || {};
                const gradesWithLists = Object.keys(schoolLists);

                // Filtra a lista mestra para manter a ordem correta
                // Se a escola nÃ£o estiver no DB ainda, retorna vazio.
                return allGradesOrder.filter(grade => gradesWithLists.includes(grade));
            }, [formData.schoolId]);

            const handleChange = (e) => {
                const { name, value } = e.target;
                
                // Se mudou a escola, reseta a sÃ©rie selecionada
                if (name === "schoolId") {
                    setFormData(prev => ({ ...prev, [name]: value, grade: "" }));
                } else {
                    setFormData(prev => ({ ...prev, [name]: value }));
                }
            };

            const handleNext = () => {
                if (!formData.schoolId || !formData.grade || !formData.parentName || !formData.parentPhone) {
                    alert("Por favor, preencha a escola, sÃ©rie e seus dados de contato.");
                    return;
                }

                const schoolData = LISTS_DB[formData.schoolId];
                const specificList = schoolData ? schoolData[formData.grade] : null;
                const list = specificList || [];

                if (list.length === 0) {
                    alert("Ainda nÃ£o temos a lista cadastrada para esta escola e sÃ©rie. Entre em contato pelo WhatsApp.");
                }

                const listWithIds = list.map((item, index) => ({ ...item, id: index }));
                setItems(listWithIds);
                setSelectedItems(new Set(listWithIds.map(i => i.id)));
                setStep(2);
                window.scrollTo(0, 0);
            };

            const toggleItem = (id) => {
                const newSelected = new Set(selectedItems);
                if (newSelected.has(id)) newSelected.delete(id);
                else newSelected.add(id);
                setSelectedItems(newSelected);
            };

            const handleSendWhatsapp = () => {
                const schoolName = schools.find(s => s.id == formData.schoolId)?.name;
                const finalItems = items.filter(i => selectedItems.has(i.id));

                let message = `OlÃ¡ *${STORE_NAME}*! ğŸ‘‹\n`;
                message += `Gostaria de um orÃ§amento/informaÃ§Ãµes:\n\n`;
                message += `ğŸ« *Escola:* ${schoolName}\n`;
                message += `ğŸ“š *SÃ©rie:* ${formData.grade}\n`;
                if (formData.studentName) message += `ğŸ“ *Aluno(a):* ${formData.studentName}\n`;
                message += `ğŸ‘¤ *ResponsÃ¡vel:* ${formData.parentName}\n`;
                message += `ğŸ“± *Contato:* ${formData.parentPhone}\n\n`;
                
                if (finalItems.length > 0) {
                    message += `*ITENS DA LISTA DESEJADOS (${finalItems.length}):*\n`;
                    finalItems.forEach(item => {
                        message += `âœ… ${item.name} (${item.category})\n`;
                    });
                } else {
                    message += `âš ï¸ *Nota:* NÃ£o selecionei itens especÃ­ficos ou a lista nÃ£o estava disponÃ­vel no App. Por favor, verifiquem a disponibilidade para esta sÃ©rie.\n`;
                }
                
                message += `\nAguardo o retorno. Obrigado!`;

                const url = `https://wa.me/${STORE_PHONE}?text=${encodeURIComponent(message)}`;
                window.open(url, '_blank');
            };

            return (
                <div className="min-h-screen bg-gray-50 font-sans text-gray-800">
                    <header className="bg-indigo-600 text-white p-6 shadow-lg">
                        <div className="max-w-md mx-auto">
                            <h1 className="text-xl font-bold flex items-center gap-2 mb-1">
                                <Icon name="book-open" className="w-6 h-6" />
                                {STORE_NAME}
                            </h1>
                            <div className="flex items-center gap-2 text-indigo-100 text-xs">
                                <Icon name="map-pin" className="w-3 h-3" />
                                <p>{STORE_ADDRESS}</p>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-md mx-auto p-4">
                        {step === 1 && (
                            <div className="space-y-6 animate-fade-in">
                                <div className="bg-white p-5 rounded-2xl shadow-sm border border-gray-200">
                                    <h2 className="text-lg font-bold text-gray-700 mb-4 flex items-center gap-2">
                                        <Icon name="school" className="w-5 h-5 text-indigo-500" /> Dados da Escola
                                    </h2>
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-600 mb-1">Selecione a Escola *</label>
                                            <select name="schoolId" value={formData.schoolId} onChange={handleChange} className="w-full p-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none">
                                                <option value="">Toque para escolher...</option>
                                                {schools.map(school => (
                                                    <option key={school.id} value={school.id}>{school.name}</option>
                                                ))}
                                            </select>
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-600 mb-1">Selecione a SÃ©rie *</label>
                                            <select 
                                                name="grade" 
                                                value={formData.grade} 
                                                onChange={handleChange} 
                                                className="w-full p-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100 disabled:text-gray-400"
                                                disabled={!formData.schoolId || availableGrades.length === 0}
                                            >
                                                <option value="">
                                                    {!formData.schoolId 
                                                        ? "Selecione uma escola primeiro..." 
                                                        : (availableGrades.length === 0 ? "Nenhuma sÃ©rie cadastrada para esta escola" : "Toque para escolher...")
                                                    }
                                                </option>
                                                {availableGrades.map(grade => (
                                                    <option key={grade} value={grade}>{grade}</option>
                                                ))}
                                            </select>
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-600 mb-1">Nome do Aluno (Opcional)</label>
                                            <div className="relative">
                                                <div className="absolute left-3 top-3.5 text-gray-400"><Icon name="graduation-cap" className="w-5 h-5" /></div>
                                                <input type="text" name="studentName" value={formData.studentName} onChange={handleChange} placeholder="Ex: JoÃ£o Silva" className="w-full pl-10 p-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none" />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-white p-5 rounded-2xl shadow-sm border border-gray-200">
                                    <h2 className="text-lg font-bold text-gray-700 mb-4 flex items-center gap-2">
                                        <Icon name="user" className="w-5 h-5 text-indigo-500" /> Seus Dados
                                    </h2>
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-600 mb-1">Seu Nome *</label>
                                            <input type="text" name="parentName" value={formData.parentName} onChange={handleChange} placeholder="Nome do pai/mÃ£e" className="w-full p-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none" />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-600 mb-1">Seu Telefone/WhatsApp *</label>
                                            <div className="relative">
                                                <div className="absolute left-3 top-3.5 text-gray-400"><Icon name="phone" className="w-5 h-5" /></div>
                                                <input type="tel" name="parentPhone" value={formData.parentPhone} onChange={handleChange} placeholder="(00) 00000-0000" className="w-full pl-10 p-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none" />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <button onClick={handleNext} className="w-full bg-indigo-600 text-white font-bold py-4 rounded-xl shadow-lg hover:bg-indigo-700 transition-all flex items-center justify-center gap-2">
                                    Ver Lista de Materiais <Icon name="chevron-right" className="w-5 h-5" />
                                </button>
                            </div>
                        )}

                        {step === 2 && (
                            <div className="flex flex-col h-full animate-fade-in">
                                <div className="bg-indigo-50 p-4 rounded-xl border border-indigo-100 mb-4 flex items-center justify-between">
                                    <div>
                                        <h3 className="font-bold text-indigo-900">{schools.find(s=>s.id == formData.schoolId)?.name}</h3>
                                        <p className="text-sm text-indigo-600">{formData.grade} â€¢ {formData.studentName || "Aluno(a)"}</p>
                                    </div>
                                    <button onClick={() => setStep(1)} className="text-xs bg-white px-3 py-1 rounded border border-indigo-200 text-indigo-600 font-medium">Alterar</button>
                                </div>

                                <div className="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-24">
                                    <div className="p-4 bg-gray-50 border-b border-gray-200">
                                        <h2 className="font-bold text-gray-700">Selecione os itens desejados:</h2>
                                        <p className="text-xs text-gray-500">VocÃª pode desmarcar o que jÃ¡ tem em casa.</p>
                                    </div>
                                    
                                    {items.length === 0 ? (
                                        <div className="p-8 text-center text-gray-500">
                                            <p>Nenhum item cadastrado para esta lista ainda.</p>
                                            <p className="text-xs mt-2">VocÃª pode enviar a solicitaÃ§Ã£o mesmo assim.</p>
                                        </div>
                                    ) : (
                                        <div className="divide-y divide-gray-100">
                                            {items.map((item) => {
                                                const isSelected = selectedItems.has(item.id);
                                                return (
                                                    <div key={item.id} onClick={() => toggleItem(item.id)} className={`p-4 flex items-center gap-4 cursor-pointer transition-colors ${isSelected ? 'bg-indigo-50/50' : 'bg-white hover:bg-gray-50'}`}>
                                                        <div className={`transition-all duration-200 ${isSelected ? 'text-indigo-600' : 'text-gray-300'}`}>
                                                            {isSelected ? <Icon name="check-square" className="w-6 h-6" /> : <Icon name="square" className="w-6 h-6" />}
                                                        </div>
                                                        <div className="flex-1">
                                                            <p className={`font-medium ${isSelected ? 'text-gray-900' : 'text-gray-500'}`}>{item.name}</p>
                                                            <p className="text-xs text-gray-400">{item.category}</p>
                                                        </div>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    )}
                                </div>

                                <div className="fixed bottom-0 left-0 right-0 bg-white p-4 border-t border-gray-200 shadow-[0_-5px_20px_rgba(0,0,0,0.1)] z-20">
                                    <div className="max-w-md mx-auto flex flex-col gap-2">
                                        <div className="flex justify-between items-center px-1">
                                            <span className="text-sm text-gray-500">Itens selecionados:</span>
                                            <span className="font-bold text-indigo-600 text-lg">{selectedItems.size} de {items.length}</span>
                                        </div>
                                        <button onClick={handleSendWhatsapp} className="w-full bg-green-600 text-white font-bold py-3.5 rounded-xl shadow-md hover:bg-green-700 transition-all flex items-center justify-center gap-2">
                                            <Icon name="send" className="w-5 h-5" /> Enviar OrÃ§amento no WhatsApp
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

